(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,73239,t=>{"use strict";t.s(["TextStyle",()=>u],73239);var e=t.i(95932),i=t.i(57471),r=t.i(49864),n=t.i(85830),s=t.i(81541),a=t.i(37836),l=t.i(20446),o=t.i(86230);let h=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function d(t,e,i){var r;return t&&(e[i++]=t.color,e[i++]=t.alpha,e[i++]=null==(r=t.fill)?void 0:r.styleKey),i}let c=class t extends e.default{get align(){return this._align}set align(t){this._align=t,this.update()}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords=t,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(e){null!==e&&"object"==typeof e?this._dropShadow=this._createProxy({...t.defaultDropShadow,...e}):this._dropShadow=e?this._createProxy({...t.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily=t,this.update()}get fontSize(){return this._fontSize}set fontSize(t){"string"==typeof t?this._fontSize=parseInt(t,10):this._fontSize=t,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle=t.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant=t,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight=t,this.update()}get leading(){return this._leading}set leading(t){this._leading=t,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing=t,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight=t,this.update()}get padding(){return this._padding}set padding(t){this._padding=t,this.update()}get filters(){return this._filters}set filters(t){this._filters=t,this.update()}get trim(){return this._trim}set trim(t){this._trim=t,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline=t,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace=t,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap=t,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth=t,this.update()}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._isFillStyle(t)&&(this._originalFill=this._createProxy({...l.GraphicsContext.defaultFillStyle,...t},()=>{this._fill=(0,o.toFillStyle)({...this._originalFill},l.GraphicsContext.defaultFillStyle)})),this._fill=(0,o.toFillStyle)(0===t?"black":t,l.GraphicsContext.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._isFillStyle(t)&&(this._originalStroke=this._createProxy({...l.GraphicsContext.defaultStrokeStyle,...t},()=>{this._stroke=(0,o.toStrokeStyle)({...this._originalStroke},l.GraphicsContext.defaultStrokeStyle)})),this._stroke=(0,o.toStrokeStyle)(t,l.GraphicsContext.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=function(t){var e,r,n,s,a,l;let o=[],c=0;for(let e=0;e<h.length;e++){let i="_".concat(h[e]);o[c++]=t[i]}return c=d(t._fill,o,c),e=t._stroke,r=o,n=c,e&&(n=d(e,r,n),r[n++]=e.width,r[n++]=e.alignment,r[n++]=e.cap,r[n++]=e.join,r[n++]=e.miterLimit),c=n,s=t.dropShadow,a=o,l=c,s&&(a[l++]=s.alpha,a[l++]=s.angle,a[l++]=s.blur,a[l++]=s.distance,a[l++]=i.Color.shared.setValue(s.color).toNumber()),c=l,c=function(t,e,i){if(!t)return i;for(let r of t)e[i++]=r.uid;return i}(t.filters,o,c),o.join("-")}(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){let e=t.defaultTextStyle;for(let t in e)this[t]=e[t]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new t({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth,filters:this._filters?[...this._filters]:void 0})}_getFinalPadding(){let t=0;if(this._filters)for(let e=0;e<this._filters.length;e++)t+=this._filters[e].padding;return Math.max(this._padding,t)}destroy(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.removeAllListeners(),"boolean"==typeof t?t:null==t?void 0:t.texture){var e,i,r,n;let s="boolean"==typeof t?t:null==t?void 0:t.textureSource;(null==(e=this._fill)?void 0:e.texture)&&this._fill.texture.destroy(s),(null==(i=this._originalFill)?void 0:i.texture)&&this._originalFill.texture.destroy(s),(null==(r=this._stroke)?void 0:r.texture)&&this._stroke.texture.destroy(s),(null==(n=this._originalStroke)?void 0:n.texture)&&this._originalStroke.texture.destroy(s)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(t,e){return new Proxy(t,{set:(t,i,r)=>(t[i]=r,null==e||e(i,r),this.update(),!0)})}_isFillStyle(t){return(null!=t?t:null)!==null&&!(i.Color.isColorLike(t)||t instanceof s.FillGradient||t instanceof a.FillPattern)}constructor(e={}){super(),function(t){if("boolean"==typeof t.dropShadow&&t.dropShadow){var e,l,o,h,d;let i=u.defaultDropShadow;t.dropShadow={alpha:null!=(e=t.dropShadowAlpha)?e:i.alpha,angle:null!=(l=t.dropShadowAngle)?l:i.angle,blur:null!=(o=t.dropShadowBlur)?o:i.blur,color:null!=(h=t.dropShadowColor)?h:i.color,distance:null!=(d=t.dropShadowDistance)?d:i.distance}}if(void 0!==t.strokeThickness){(0,r.deprecation)(r.v8_0_0,"strokeThickness is now a part of stroke");let e=t.stroke,n={};if(i.Color.isColorLike(e))n.color=e;else if(e instanceof s.FillGradient||e instanceof a.FillPattern)n.fill=e;else if(Object.hasOwnProperty.call(e,"color")||Object.hasOwnProperty.call(e,"fill"))n=e;else throw Error("Invalid stroke value.");t.stroke={...n,width:t.strokeThickness}}if(Array.isArray(t.fillGradientStops)){if((0,r.deprecation)(r.v8_0_0,"gradient fill is now a fill pattern: `new FillGradient(...)`"),!Array.isArray(t.fill)||0===t.fill.length)throw Error("Invalid fill value. Expected an array of colors for gradient fill.");t.fill.length!==t.fillGradientStops.length&&(0,n.warn)("The number of fill colors must match the number of fill gradient stops.");let e=new s.FillGradient({start:{x:0,y:0},end:{x:0,y:1},textureSpace:"local"}),a=t.fillGradientStops.slice(),l=t.fill.map(t=>i.Color.shared.setValue(t).toNumber());a.forEach((t,i)=>{e.addColorStop(t,l[i])}),t.fill={fill:e}}}(e);let l={...t.defaultTextStyle,...e};for(let t in l)this[t]=l[t];this.update()}};c.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5},c.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let u=c},30524,t=>{"use strict";t.s(["AbstractBitmapFont",()=>r]);var e=t.i(95932),i=t.i(49864);class r extends e.default{get font(){return(0,i.deprecation)(i.v8_0_0,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return(0,i.deprecation)(i.v8_0_0,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return(0,i.deprecation)(i.v8_0_0,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return(0,i.deprecation)(i.v8_0_0,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return(0,i.deprecation)(i.v8_0_0,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(let t in this.emit("destroy",this),this.removeAllListeners(),this.chars){var e;null==(e=this.chars[t].texture)||e.destroy()}this.chars=null,t&&(this.pages.forEach(t=>t.texture.destroy(!0)),this.pages=null)}constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}}},78266,264,70,t=>{"use strict";t.s(["CanvasTextMetrics",()=>a],78266);var e=t.i(27402);t.s(["fontStringFromTextStyle",()=>r],264);let i=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function r(t){let e="number"==typeof t.fontSize?"".concat(t.fontSize,"px"):t.fontSize,r=t.fontFamily;Array.isArray(t.fontFamily)||(r=t.fontFamily.split(","));for(let t=r.length-1;t>=0;t--){let e=r[t].trim();/([\"\'])[^\'\"]+\1/.test(e)||i.includes(e)||(e='"'.concat(e,'"')),r[t]=e}return"".concat(t.fontStyle," ").concat(t.fontVariant," ").concat(t.fontWeight," ").concat(e," ").concat(r.join(","))}let n={willReadFrequently:!0},s=class t{static get experimentalLetterSpacingSupported(){let i=t._experimentalLetterSpacingSupported;if(void 0===i){let r=e.DOMAdapter.get().getCanvasRenderingContext2D().prototype;i=t._experimentalLetterSpacingSupported="letterSpacing"in r||"textLetterSpacing"in r}return i}static measureText(){var e;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ",n=arguments.length>1?arguments[1]:void 0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t._canvas,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.wordWrap,l=r(n),o=t.measureFont(l);0===o.fontSize&&(o.fontSize=n.fontSize,o.ascent=n.fontSize);let h=t.__context;h.font=l;let d=(a?t._wordWrap(i,n,s):i).split(/(?:\r\n|\r|\n)/),c=Array(d.length),u=0;for(let e=0;e<d.length;e++){let i=t._measureText(d[e],n.letterSpacing,h);c[e]=i,u=Math.max(u,i)}let f=(null==(e=n._stroke)?void 0:e.width)||0,p=u+f;n.dropShadow&&(p+=n.dropShadow.distance);let g=n.lineHeight||o.fontSize,_=Math.max(g,o.fontSize+f)+(d.length-1)*(g+n.leading);return n.dropShadow&&(_+=n.dropShadow.distance),new t(i,n,p,_,d,c,g+n.leading,u,o)}static _measureText(e,i,r){let n=!1;t.experimentalLetterSpacingSupported&&(t.experimentalLetterSpacing?(r.letterSpacing="".concat(i,"px"),r.textLetterSpacing="".concat(i,"px"),n=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let s=r.measureText(e),a=s.width,l=-s.actualBoundingBoxLeft,o=s.actualBoundingBoxRight-l;if(a>0)if(n)a-=i,o-=i;else{let r=(t.graphemeSegmenter(e).length-1)*i;a+=r,o+=r}return Math.max(a,o)}static _wordWrap(e,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t._canvas,s=r.getContext("2d",n),a=0,l="",o="",h=Object.create(null),{letterSpacing:d,whiteSpace:c}=i,u=t._collapseSpaces(c),f=t._collapseNewlines(c),p=!u,g=i.wordWrapWidth+d,_=t._tokenize(e);for(let e=0;e<_.length;e++){let r=_[e];if(t._isNewline(r)){if(!f){o+=t._addLine(l),p=!u,l="",a=0;continue}r=" "}if(u){let e=t.isBreakingSpace(r),i=t.isBreakingSpace(l[l.length-1]);if(e&&i)continue}let n=t._getFromCache(r,d,h,s);if(n>g)if(""!==l&&(o+=t._addLine(l),l="",a=0),t.canBreakWords(r,i.breakWords)){let e=t.wordWrapSplit(r);for(let n=0;n<e.length;n++){let c=e[n],u=c,f=1;for(;e[n+f];){let s=e[n+f];if(t.canBreakChars(u,s,r,n,i.breakWords))break;c+=s,u=s,f++}n+=f-1;let _=t._getFromCache(c,d,h,s);_+a>g&&(o+=t._addLine(l),p=!1,l="",a=0),l+=c,a+=_}}else{l.length>0&&(o+=t._addLine(l),l="",a=0);let i=e===_.length-1;o+=t._addLine(r,!i),p=!1,l="",a=0}else n+a>g&&(p=!1,o+=t._addLine(l),l="",a=0),(l.length>0||!t.isBreakingSpace(r)||p)&&(l+=r,a+=n)}return o+t._addLine(l,!1)}static _addLine(e){let i=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return e=t._trimRight(e),e=i?"".concat(e,"\n"):e}static _getFromCache(e,i,r,n){let s=r[e];return"number"!=typeof s&&(s=t._measureText(e,i,n)+i,r[e]=s),s}static _collapseSpaces(t){return"normal"===t||"pre-line"===t}static _collapseNewlines(t){return"normal"===t}static _trimRight(e){if("string"!=typeof e)return"";for(let i=e.length-1;i>=0;i--){let r=e[i];if(!t.isBreakingSpace(r))break;e=e.slice(0,-1)}return e}static _isNewline(e){return"string"==typeof e&&t._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,i){return"string"==typeof e&&t._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){let i=[],r="";if("string"!=typeof e)return i;for(let n=0;n<e.length;n++){let s=e[n],a=e[n+1];if(t.isBreakingSpace(s,a)||t._isNewline(s)){""!==r&&(i.push(r),r=""),"\r"===s&&"\n"===a?(i.push("\r\n"),n++):i.push(s);continue}r+=s}return""!==r&&i.push(r),i}static canBreakWords(t,e){return e}static canBreakChars(t,e,i,r,n){return!0}static wordWrapSplit(e){return t.graphemeSegmenter(e)}static measureFont(e){if(t._fonts[e])return t._fonts[e];let i=t._context;i.font=e;let r=i.measureText(t.METRICS_STRING+t.BASELINE_SYMBOL),n={ascent:r.actualBoundingBoxAscent,descent:r.actualBoundingBoxDescent,fontSize:r.actualBoundingBoxAscent+r.actualBoundingBoxDescent};return t._fonts[e]=n,n}static clearMetrics(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e?delete t._fonts[e]:t._fonts={}}static get _canvas(){if(!t.__canvas){let i;try{let r=new OffscreenCanvas(0,0),s=r.getContext("2d",n);if(null==s?void 0:s.measureText)return t.__canvas=r,r;i=e.DOMAdapter.get().createCanvas()}catch(t){i=e.DOMAdapter.get().createCanvas()}i.width=i.height=10,t.__canvas=i}return t.__canvas}static get _context(){return t.__context||(t.__context=t._canvas.getContext("2d",n)),t.__context}constructor(t,e,i,r,n,s,a,l,o){this.text=t,this.style=e,this.width=i,this.height=r,this.lines=n,this.lineWidths=s,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=o}};s.METRICS_STRING="|ÉqÅ",s.BASELINE_SYMBOL="M",s.BASELINE_MULTIPLIER=1.4,s.HEIGHT_MULTIPLIER=2,s.graphemeSegmenter=(()=>{var t;if("function"==typeof(null==(t=Intl)?void 0:t.Segmenter)){let t=new Intl.Segmenter;return e=>{let i=t.segment(e),r=[],n=0;for(let t of i)r[n++]=t.segment;return r}}return t=>[...t]})(),s.experimentalLetterSpacing=!1,s._fonts={},s._newlines=[10,13],s._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let a=s;t.s(["getCanvasFillStyle",()=>f],70);var l=t.i(57471),o=t.i(28959),h=t.i(31320),d=t.i(85830),c=t.i(81541),u=t.i(37836);function f(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t.texture!==h.Texture.WHITE||t.fill)if(t.fill){if(t.fill instanceof u.FillPattern){let i=t.fill,r=e.createPattern(i.texture.source.resource,"repeat"),n=i.transform.copyTo(o.Matrix.shared);return n.scale(i.texture.frame.width,i.texture.frame.height),r.setTransform(n),r}else if(t.fill instanceof c.FillGradient){let n,s=t.fill,a="linear"===s.type,o="local"===s.textureSpace,h=1,d=1;o&&i&&(h=i.width+r,d=i.height+r);let c=!1;if(a){let{start:t,end:i}=s;n=e.createLinearGradient(t.x*h,t.y*d,i.x*h,i.y*d),c=Math.abs(i.x-t.x)<Math.abs((i.y-t.y)*.1)}else{let{center:t,innerRadius:i,outerCenter:r,outerRadius:a}=s;n=e.createRadialGradient(t.x*h,t.y*d,i*h,r.x*h,r.y*d,a*h)}if(c&&o&&i){let t=i.lineHeight/d;for(let e=0;e<i.lines.length;e++){let a=(e*i.lineHeight+r/2)/d;s.colorStops.forEach(e=>{let i=a+e.offset*t;n.addColorStop(Math.floor(1e5*i)/1e5,l.Color.shared.setValue(e.color).toHex())})}}else s.colorStops.forEach(t=>{n.addColorStop(t.offset,l.Color.shared.setValue(t.color).toHex())});return n}}else{let i=e.createPattern(t.texture.source.resource,"repeat"),r=t.matrix.copyTo(o.Matrix.shared);return r.scale(t.texture.frame.width,t.texture.frame.height),i.setTransform(r),i}else{var n;return l.Color.shared.setValue(t.color).setAlpha(null!=(n=t.alpha)?n:1).toHexa()}return(0,d.warn)("FillStyle not recognised",t),"red"}},3248,87772,t=>{"use strict";t.s(["BitmapFontManager",()=>x],3248);var e=t.i(92206),i=t.i(49864),r=t.i(85830),n=t.i(78266),s=t.i(73239),a=t.i(57471),l=t.i(63646),o=t.i(81735),h=t.i(16203),d=t.i(31320),c=t.i(4864),u=t.i(264),f=t.i(70),p=t.i(30524);let g=class t extends p.AbstractBitmapFont{ensureCharacters(t){let e,i=n.CanvasTextMetrics.graphemeSegmenter(t).filter(t=>!this._currentChars.includes(t)).filter((t,e,i)=>i.indexOf(t)===e);if(!i.length)return;this._currentChars=[...this._currentChars,...i];let{canvas:r,context:s}=(e=-1===this._currentPageIndex?this._nextPage():this.pages[this._currentPageIndex]).canvasAndContext,a=e.texture.source,o=this._style,h=this._currentX,c=this._currentY,u=this._currentMaxCharHeight,f=this.baseRenderedFontSize/this.baseMeasurementFontSize,p=this._padding*f,g=!1,_=r.width/this.resolution,S=r.height/this.resolution;for(let t=0;t<i.length;t++){var x,w,m,y;let e=i[t],v=n.CanvasTextMetrics.measureText(e,o,r,!1);v.lineHeight=v.height;let C=v.width*f,F=Math.ceil(("italic"===o.fontStyle?2:1)*C),b=v.height*f,k=F+2*p,T=b+2*p;if(g=!1,"\n"!==e&&"\r"!==e&&"	"!==e&&" "!==e&&(g=!0,u=Math.ceil(Math.max(T,u))),h+k>_&&(h=0,(c+=u)+(u=T)>S)){a.update();let t=this._nextPage();r=t.canvasAndContext.canvas,s=t.canvasAndContext.context,a=t.texture.source,h=0,c=0,u=0}let B=C/f-(null!=(m=null==(x=o.dropShadow)?void 0:x.distance)?m:0)-(null!=(y=null==(w=o._stroke)?void 0:w.width)?y:0);if(this.chars[e]={id:e.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:B,kerning:{}},g){this._drawGlyph(s,v,h+p,c+p,f,o);let t=a.width*f,i=a.height*f,r=new l.Rectangle(h/t*a.width,c/i*a.height,k/t*a.width,T/i*a.height);this.chars[e].texture=new d.Texture({source:a,frame:r}),h+=Math.ceil(k)}}a.update(),this._currentX=h,this._currentY=c,this._currentMaxCharHeight=u,this._skipKerning&&this._applyKerning(i,s)}get pageTextures(){return(0,i.deprecation)(i.v8_0_0,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(t,e){let i=this._measureCache;for(let r=0;r<t.length;r++){let n=t[r];for(let t=0;t<this._currentChars.length;t++){let r=this._currentChars[t],s=i[n];s||(s=i[n]=e.measureText(n).width);let a=i[r];a||(a=i[r]=e.measureText(r).width);let l=e.measureText(n+r).width,o=l-(s+a);o&&(this.chars[n].kerning[r]=o),(o=(l=e.measureText(n+r).width)-(s+a))&&(this.chars[r].kerning[n]=o)}}}_nextPage(){this._currentPageIndex++;let t=this.resolution,e=o.CanvasPool.getOptimalCanvasAndContext(this._textureSize,this._textureSize,t);this._setupContext(e.context,this._style,t);let i=t*(this.baseRenderedFontSize/this.baseMeasurementFontSize),r=new d.Texture({source:new h.ImageSource({resource:e.canvas,resolution:i,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})});this._textureStyle&&(r.source.style=this._textureStyle);let n={canvasAndContext:e,texture:r};return this.pages[this._currentPageIndex]=n,n}_setupContext(t,e,i){var r;e.fontSize=this.baseRenderedFontSize,t.scale(i,i),t.font=(0,u.fontStringFromTextStyle)(e),e.fontSize=this.baseMeasurementFontSize,t.textBaseline=e.textBaseline;let n=e._stroke,s=null!=(r=null==n?void 0:n.width)?r:0;if(n&&(t.lineWidth=s,t.lineJoin=n.join,t.miterLimit=n.miterLimit,t.strokeStyle=(0,f.getCanvasFillStyle)(n,t)),e._fill&&(t.fillStyle=(0,f.getCanvasFillStyle)(e._fill,t)),e.dropShadow){let r=e.dropShadow,n=a.Color.shared.setValue(r.color).toArray(),s=r.blur*i,l=r.distance*i;t.shadowColor="rgba(".concat(255*n[0],",").concat(255*n[1],",").concat(255*n[2],",").concat(r.alpha,")"),t.shadowBlur=s,t.shadowOffsetX=Math.cos(r.angle)*l,t.shadowOffsetY=Math.sin(r.angle)*l}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}_drawGlyph(t,e,i,r,n,s){var a;let l=e.text,o=e.fontProperties,h=s._stroke,d=(null!=(a=null==h?void 0:h.width)?a:0)*n,c=i+d/2,u=r-d/2,f=o.descent*n,p=e.lineHeight*n,g=!1;s.stroke&&d&&(g=!0,t.strokeText(l,c,u+p-f));let{shadowBlur:_,shadowOffsetX:S,shadowOffsetY:x}=t;s._fill&&(g&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),t.fillText(l,c,u+p-f)),g&&(t.shadowBlur=_,t.shadowOffsetX=S,t.shadowOffsetY=x)}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){let{canvasAndContext:e,texture:i}=this.pages[t];o.CanvasPool.returnCanvasAndContext(e),i.destroy(!0)}this.pages=null}constructor(e){var i,r,s;super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentMaxCharHeight=0,this._currentPageIndex=-1,this._skipKerning=!1;let a={...t.defaultOptions,...e};this._textureSize=a.textureSize,this._mipmap=a.mipmap;let l=a.style.clone();a.overrideFill&&(l._fill.color=0xffffff,l._fill.alpha=1,l._fill.texture=d.Texture.WHITE,l._fill.fill=null),this.applyFillAsTint=a.overrideFill;let o=l.fontSize;l.fontSize=this.baseMeasurementFontSize;let h=(0,u.fontStringFromTextStyle)(l);a.overrideSize?l._stroke&&(l._stroke.width*=this.baseRenderedFontSize/o):l.fontSize=this.baseRenderedFontSize=o,this._style=l,this._skipKerning=null!=(i=a.skipKerning)&&i,this.resolution=null!=(r=a.resolution)?r:1,this._padding=null!=(s=a.padding)?s:4,a.textureStyle&&(this._textureStyle=a.textureStyle instanceof c.TextureStyle?a.textureStyle:new c.TextureStyle(a.textureStyle)),this.fontMetrics=n.CanvasTextMetrics.measureFont(h),this.lineHeight=l.lineHeight||this.fontMetrics.fontSize||l.fontSize}};function _(t,e,i,r){let n={width:0,height:0,offsetY:0,scale:e.fontSize/i.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};n.offsetY=i.baseLineOffset;let s=n.lines[0],a=null,l=!0,o={spaceWord:!1,width:0,start:0,index:0,positions:[],chars:[]},h=i.baseMeasurementFontSize/e.fontSize,d=e.letterSpacing*h,c=e.wordWrapWidth*h,u=e.lineHeight?e.lineHeight*h:i.lineHeight,f=e.wordWrap&&e.breakWords,p=t=>{let e=s.width;for(let i=0;i<o.index;i++){let r=t.positions[i];s.chars.push(t.chars[i]),s.charPositions.push(r+e)}s.width+=t.width,l=!1,o.width=0,o.index=0,o.chars.length=0},g=()=>{let t=s.chars.length-1;if(r){let e=s.chars[t];for(;" "===e;)s.width-=i.chars[e].xAdvance,e=s.chars[--t]}n.width=Math.max(n.width,s.width),s={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},l=!0,n.lines.push(s),n.height+=u},_=t=>t-d>c;for(let r=0;r<t.length+1;r++){let n,h=r===t.length;h||(n=t[r]);let c=i.chars[n]||i.chars[" "];if(/(?:\s)/.test(n)||"\r"===n||"\n"===n||h){if(!l&&e.wordWrap&&_(s.width+o.width)?g():o.start=s.width,p(o),h||s.charPositions.push(0),"\r"===n||"\n"===n)0!==s.width&&g();else if(!h){let t=c.xAdvance+(c.kerning[a]||0)+d;s.width+=t,s.spaceWidth=t,s.spacesIndex.push(s.charPositions.length),s.chars.push(n)}}else{let t=c.kerning[a]||0,e=c.xAdvance+t+d;f&&_(s.width+o.width+e)&&(p(o),g()),o.positions[o.index++]=o.width+t,o.chars.push(n),o.width+=e}a=n}return g(),"center"===e.align?function(t){for(let e=0;e<t.lines.length;e++){let i=t.lines[e],r=t.width/2-i.width/2;for(let t=0;t<i.charPositions.length;t++)i.charPositions[t]+=r}}(n):"right"===e.align?function(t){for(let e=0;e<t.lines.length;e++){let i=t.lines[e],r=t.width-i.width;for(let t=0;t<i.charPositions.length;t++)i.charPositions[t]+=r}}(n):"justify"===e.align&&function(t){let e=t.width;for(let i=0;i<t.lines.length;i++){let r=t.lines[i],n=0,s=r.spacesIndex[n++],a=0,l=r.spacesIndex.length,o=(e-r.width)/l;for(let t=0;t<r.charPositions.length;t++)t===s&&(s=r.spacesIndex[n++],a+=o),r.charPositions[t]+=a}}(n),n}g.defaultOptions={textureSize:512,style:new s.TextStyle,mipmap:!0},t.s(["getBitmapTextLayout",()=>_],87772);let S=0,x=new class{getFont(t,i){var n;let s="".concat(i.fontFamily,"-bitmap"),a=!0;if(i._fill.fill&&!i._stroke)s+=i._fill.fill.styleKey,a=!1;else if(i._stroke||i.dropShadow){let t=i.styleKey;t=t.substring(0,t.lastIndexOf("-")),s="".concat(t,"-bitmap"),a=!1}if(!e.Cache.has(s)){let t=Object.create(i);t.lineHeight=0;let n=new g({style:t,overrideFill:a,overrideSize:!0,...this.defaultOptions});++S>50&&(0,r.warn)("BitmapText","You have dynamically created ".concat(S,' bitmap fonts, this can be inefficient. Try pre installing your font styles using `BitmapFont.install({name:"style1", style})`')),n.once("destroy",()=>{S--,e.Cache.remove(s)}),e.Cache.set(s,n)}let l=e.Cache.get(s);return null==(n=l.ensureCharacters)||n.call(l,t),l}getLayout(t,e){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=this.getFont(t,e);return _(n.CanvasTextMetrics.graphemeSegmenter(t),e,r,i)}measureText(t,e){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return this.getLayout(t,e,i)}install(){for(var t,r,n,a,l,o=arguments.length,h=Array(o),d=0;d<o;d++)h[d]=arguments[d];let c=h[0];"string"==typeof c&&(c={name:c,style:h[1],chars:null==(t=h[2])?void 0:t.chars,resolution:null==(r=h[2])?void 0:r.resolution,padding:null==(n=h[2])?void 0:n.padding,skipKerning:null==(a=h[2])?void 0:a.skipKerning},(0,i.deprecation)(i.v8_0_0,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));let u=null==c?void 0:c.name;if(!u)throw Error("[BitmapFontManager] Property `name` is required.");let f=(c={...this.defaultOptions,...c}).style,p=f instanceof s.TextStyle?f:new s.TextStyle(f),_=null!=(l=c.dynamicFill)?l:this._canUseTintForStyle(p),S=new g({style:p,overrideFill:_,skipKerning:c.skipKerning,padding:c.padding,resolution:c.resolution,overrideSize:!1,textureStyle:c.textureStyle}),x=function(t){if(""===t)return[];"string"==typeof t&&(t=[t]);let e=[];for(let i=0,r=t.length;i<r;i++){let r=t[i];if(Array.isArray(r)){if(2!==r.length)throw Error("[BitmapFont]: Invalid character range length, expecting 2 got ".concat(r.length,"."));if(0===r[0].length||0===r[1].length)throw Error("[BitmapFont]: Invalid character delimiter.");let t=r[0].charCodeAt(0),i=r[1].charCodeAt(0);if(i<t)throw Error("[BitmapFont]: Invalid character range.");for(let r=t;r<=i;r++)e.push(String.fromCharCode(r))}else e.push(...Array.from(r))}if(0===e.length)throw Error("[BitmapFont]: Empty set when resolving characters.");return e}(c.chars);return S.ensureCharacters(x.join("")),e.Cache.set("".concat(u,"-bitmap"),S),S.once("destroy",()=>e.Cache.remove("".concat(u,"-bitmap"))),S}uninstall(t){let i=e.Cache.get("".concat(t,"-bitmap"));i&&i.destroy()}_canUseTintForStyle(t){return!t._stroke&&(!t.dropShadow||0===t.dropShadow.color)&&!t._fill.fill&&0xffffff===t._fill.color}constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1,textureStyle:null}}}},34787,t=>{"use strict";t.s(["getCanvasBoundingBox",()=>o]);var e=t.i(27402),i=t.i(61411),r=t.i(63646);let n=null,s=null;function a(t,e,i){for(let r=0,n=4*i*e;r<e;++r,n+=4)if(0!==t[n+3])return!1;return!0}function l(t,e,i,r,n){let s=4*e;for(let e=r,a=r*s+4*i;e<=n;++e,a+=s)if(0!==t[a+3])return!1;return!0}function o(){for(var t,o,h,d=arguments.length,c=Array(d),u=0;u<d;u++)c[u]=arguments[u];let f=c[0];f.canvas||(f={canvas:c[0],resolution:c[1]});let{canvas:p}=f,g=Math.min(null!=(t=f.resolution)?t:1,1),_=null!=(o=f.width)?o:p.width,S=null!=(h=f.height)?h:p.height,x=f.output;if(n||((s=(n=e.DOMAdapter.get().createCanvas(256,128)).getContext("2d",{willReadFrequently:!0})).globalCompositeOperation="copy",s.globalAlpha=1),(n.width<_||n.height<S)&&(n.width=(0,i.nextPow2)(_),n.height=(0,i.nextPow2)(S)),!s)throw TypeError("Failed to get canvas 2D context");s.drawImage(p,0,0,_,S,0,0,_*g,S*g);let w=s.getImageData(0,0,_,S).data,m=0,y=0,v=_-1,C=S-1;for(;y<S&&a(w,_,y);)++y;if(y===S)return r.Rectangle.EMPTY;for(;a(w,_,C);)--C;for(;l(w,_,m,y,C);)++m;for(;l(w,_,v,y,C);)--v;return++v,++C,s.globalCompositeOperation="source-over",s.strokeRect(m,y,v-m,C-y),s.globalCompositeOperation="copy",null!=x||(x=new r.Rectangle),x.set(m/g,y/g,(v-m)/g,(C-y)/g),x}},24183,t=>{"use strict";t.s(["CanvasTextGenerator",()=>h]);var e=t.i(57471),i=t.i(63646),r=t.i(81735),n=t.i(34787),s=t.i(78266),a=t.i(264),l=t.i(70);let o=new i.Rectangle,h=new class{getCanvasAndContext(t){let{text:e,style:i,resolution:a=1}=t,l=i._getFinalPadding(),h=s.CanvasTextMetrics.measureText(e||" ",i),d=Math.ceil(Math.ceil(Math.max(1,h.width)+2*l)*a),c=Math.ceil(Math.ceil(Math.max(1,h.height)+2*l)*a),u=r.CanvasPool.getOptimalCanvasAndContext(d,c);this._renderTextToCanvas(e,i,l,a,u);let f=i.trim?(0,n.getCanvasBoundingBox)({canvas:u.canvas,width:d,height:c,resolution:1,output:o}):o.set(0,0,d,c);return{canvasAndContext:u,frame:f}}returnCanvasAndContext(t){r.CanvasPool.returnCanvasAndContext(t)}_renderTextToCanvas(t,i,r,n,o){var h,d,c,u,f;let p,g,{canvas:_,context:S}=o,x=(0,a.fontStringFromTextStyle)(i),w=s.CanvasTextMetrics.measureText(t||" ",i),m=w.lines,y=w.lineHeight,v=w.lineWidths,C=w.maxLineWidth,F=w.fontProperties,b=_.height;if(S.resetTransform(),S.scale(n,n),S.textBaseline=i.textBaseline,null==(h=i._stroke)?void 0:h.width){let t=i._stroke;S.lineWidth=t.width,S.miterLimit=t.miterLimit,S.lineJoin=t.join,S.lineCap=t.cap}S.font=x;let k=i.dropShadow?2:1;for(let t=0;t<k;++t){let s=i.dropShadow&&0===t,a=s?Math.ceil(Math.max(1,b)+2*r):0,h=a*n;if(s){S.fillStyle="black",S.strokeStyle="black";let t=i.dropShadow,r=t.color,s=t.alpha;S.shadowColor=e.Color.shared.setValue(r).setAlpha(s).toRgbaString();let a=t.blur*n,l=t.distance*n;S.shadowBlur=a,S.shadowOffsetX=Math.cos(t.angle)*l,S.shadowOffsetY=Math.sin(t.angle)*l+h}else{if(S.fillStyle=i._fill?(0,l.getCanvasFillStyle)(i._fill,S,w,2*r):null,null==(c=i._stroke)?void 0:c.width){let t=.5*i._stroke.width+2*r;S.strokeStyle=(0,l.getCanvasFillStyle)(i._stroke,S,w,t)}S.shadowColor="black"}let _=(y-F.fontSize)/2;y-F.fontSize<0&&(_=0);let x=null!=(u=null==(d=i._stroke)?void 0:d.width)?u:0;for(let t=0;t<m.length;t++)p=x/2,g=x/2+t*y+F.ascent+_,"right"===i.align?p+=C-v[t]:"center"===i.align&&(p+=(C-v[t])/2),(null==(f=i._stroke)?void 0:f.width)&&this._drawLetterSpacing(m[t],i,o,p+r,g+r-a,!0),void 0!==i._fill&&this._drawLetterSpacing(m[t],i,o,p+r,g+r-a)}}_drawLetterSpacing(t,e,i,r,n){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],{context:l}=i,o=e.letterSpacing,h=!1;if(s.CanvasTextMetrics.experimentalLetterSpacingSupported&&(s.CanvasTextMetrics.experimentalLetterSpacing?(l.letterSpacing="".concat(o,"px"),l.textLetterSpacing="".concat(o,"px"),h=!0):(l.letterSpacing="0px",l.textLetterSpacing="0px")),0===o||h)return void(a?l.strokeText(t,r,n):l.fillText(t,r,n));let d=r,c=s.CanvasTextMetrics.graphemeSegmenter(t),u=l.measureText(t).width,f=0;for(let t=0;t<c.length;++t){let e=c[t];a?l.strokeText(e,d,n):l.fillText(e,d,n);let i="";for(let e=t+1;e<c.length;++e)i+=c[e];d+=u-(f=l.measureText(i).width)+o,u=f}}}},55246,17982,3274,t=>{"use strict";t.s(["NineSliceGeometry",()=>d],55246),t.s(["PlaneGeometry",()=>o],3274);var e=t.i(49864);t.s(["MeshGeometry",()=>a],17982);var i=t.i(85465),r=t.i(64957),n=t.i(60406);let s=class t extends n.Geometry{get positions(){return this.attributes.aPosition.buffer.data}set positions(t){this.attributes.aPosition.buffer.data=t}get uvs(){return this.attributes.aUV.buffer.data}set uvs(t){this.attributes.aUV.buffer.data=t}get indices(){return this.indexBuffer.data}set indices(t){this.indexBuffer.data=t}constructor(...n){var s;let a=null!=(s=n[0])?s:{};a instanceof Float32Array&&((0,e.deprecation)(e.v8_0_0,"use new MeshGeometry({ positions, uvs, indices }) instead"),a={positions:a,uvs:n[1],indices:n[2]});let l=(a={...t.defaultOptions,...a}).positions||new Float32Array([0,0,1,0,1,1,0,1]),o=a.uvs;o||(o=new Float32Array(a.positions?l.length:[0,0,1,0,1,1,0,1]));let h=a.indices||new Uint32Array([0,1,2,0,2,3]),d=a.shrinkBuffersToFit,c=new i.Buffer({data:l,label:"attribute-mesh-positions",shrinkToFit:d,usage:r.BufferUsage.VERTEX|r.BufferUsage.COPY_DST});super({attributes:{aPosition:{buffer:c,format:"float32x2",stride:8,offset:0},aUV:{buffer:new i.Buffer({data:o,label:"attribute-mesh-uvs",shrinkToFit:d,usage:r.BufferUsage.VERTEX|r.BufferUsage.COPY_DST}),format:"float32x2",stride:8,offset:0}},indexBuffer:new i.Buffer({data:h,label:"index-mesh-buffer",shrinkToFit:d,usage:r.BufferUsage.INDEX|r.BufferUsage.COPY_DST}),topology:a.topology}),this.batchMode="auto"}};s.defaultOptions={topology:"triangle-list",shrinkBuffersToFit:!1};let a=s,l=class t extends a{build(e){var i,r,n,s;e={...t.defaultOptions,...e},this.verticesX=null!=(i=this.verticesX)?i:e.verticesX,this.verticesY=null!=(r=this.verticesY)?r:e.verticesY,this.width=null!=(n=this.width)?n:e.width,this.height=null!=(s=this.height)?s:e.height;let a=this.verticesX*this.verticesY,l=[],o=[],h=[],d=this.verticesX-1,c=this.verticesY-1,u=this.width/d,f=this.height/c;for(let t=0;t<a;t++){let e=t%this.verticesX,i=t/this.verticesX|0;l.push(e*u,i*f),o.push(e/d,i/c)}let p=d*c;for(let t=0;t<p;t++){let e=t%d,i=t/d|0,r=i*this.verticesX+e,n=i*this.verticesX+e+1,s=(i+1)*this.verticesX+e,a=(i+1)*this.verticesX+e+1;h.push(r,n,s,n,a,s)}this.buffers[0].data=new Float32Array(l),this.buffers[1].data=new Float32Array(o),this.indexBuffer.data=new Uint32Array(h),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}constructor(...t){var i;super({});let r=null!=(i=t[0])?i:{};"number"==typeof r&&((0,e.deprecation)(e.v8_0_0,"PlaneGeometry constructor changed please use { width, height, verticesX, verticesY } instead"),r={width:r,height:t[1],verticesX:t[2],verticesY:t[3]}),this.build(r)}};l.defaultOptions={width:100,height:100,verticesX:10,verticesY:10};let o=l,h=class t extends o{update(t){var e,i,r,n,s,a,l,o,h,d;this.width=null!=(r=t.width)?r:this.width,this.height=null!=(n=t.height)?n:this.height,this._originalWidth=null!=(s=t.originalWidth)?s:this._originalWidth,this._originalHeight=null!=(a=t.originalHeight)?a:this._originalHeight,this._leftWidth=null!=(l=t.leftWidth)?l:this._leftWidth,this._rightWidth=null!=(o=t.rightWidth)?o:this._rightWidth,this._topHeight=null!=(h=t.topHeight)?h:this._topHeight,this._bottomHeight=null!=(d=t.bottomHeight)?d:this._bottomHeight,this._anchorX=null==(e=t.anchor)?void 0:e.x,this._anchorY=null==(i=t.anchor)?void 0:i.y,this.updateUvs(),this.updatePositions()}updatePositions(){let t=this.positions,{width:e,height:i,_leftWidth:r,_rightWidth:n,_topHeight:s,_bottomHeight:a,_anchorX:l,_anchorY:o}=this,h=r+n,d=s+a,c=Math.min(e>h?1:e/h,i>d?1:i/d),u=l*e,f=o*i;t[0]=t[8]=t[16]=t[24]=-u,t[2]=t[10]=t[18]=t[26]=r*c-u,t[4]=t[12]=t[20]=t[28]=e-n*c-u,t[6]=t[14]=t[22]=t[30]=e-u,t[1]=t[3]=t[5]=t[7]=-f,t[9]=t[11]=t[13]=t[15]=s*c-f,t[17]=t[19]=t[21]=t[23]=i-a*c-f,t[25]=t[27]=t[29]=t[31]=i-f,this.getBuffer("aPosition").update()}updateUvs(){let t=this.uvs;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1;let e=1/this._originalWidth,i=1/this._originalHeight;t[2]=t[10]=t[18]=t[26]=e*this._leftWidth,t[9]=t[11]=t[13]=t[15]=i*this._topHeight,t[4]=t[12]=t[20]=t[28]=1-e*this._rightWidth,t[17]=t[19]=t[21]=t[23]=1-i*this._bottomHeight,this.getBuffer("aUV").update()}constructor(e={}){e={...t.defaultOptions,...e},super({width:e.width,height:e.height,verticesX:4,verticesY:4}),this.update(e)}};h.defaultOptions={width:100,height:100,leftWidth:10,topHeight:10,rightWidth:10,bottomHeight:10,originalWidth:100,originalHeight:100};let d=h},71467,36566,t=>{"use strict";let e;t.s(["measureHtmlText",()=>a],71467),t.s(["HTMLTextRenderData",()=>s],36566);var i=t.i(27402);let r="http://www.w3.org/2000/svg",n="http://www.w3.org/1999/xhtml";class s{constructor(){this.svgRoot=document.createElementNS(r,"svg"),this.foreignObject=document.createElementNS(r,"foreignObject"),this.domElement=document.createElementNS(n,"div"),this.styleElement=document.createElementNS(n,"style");let{foreignObject:t,svgRoot:e,styleElement:s,domElement:a}=this;t.setAttribute("width","10000"),t.setAttribute("height","10000"),t.style.overflow="hidden",e.appendChild(t),t.appendChild(s),t.appendChild(a),this.image=i.DOMAdapter.get().createImage()}}function a(t,i,r,n){n||(n=e||(e=new s));let{domElement:a,styleElement:l,svgRoot:o}=n;a.innerHTML="<style>".concat(i.cssStyle,";</style><div style='padding:0'>").concat(t,"</div>"),a.setAttribute("style","transform-origin: top left; display: inline-block"),r&&(l.textContent=r),document.body.appendChild(o);let h=a.getBoundingClientRect();o.remove();let d=2*i.padding;return{width:h.width-d,height:h.height-d}}}]);